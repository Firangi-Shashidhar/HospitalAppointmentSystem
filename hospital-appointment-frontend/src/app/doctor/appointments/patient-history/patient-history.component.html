<div class="patient-history-bg">
  <h2>Patient History</h2>
  <button class="back-btn" (click)="goBack()">Back to Dashboard</button>
  
  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-error">
    <i class="fa-solid fa-exclamation-triangle"></i>
    {{ errorMessage }}
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading">
    <i class="fa-solid fa-spinner fa-spin"></i>
    Loading patient history...
  </div>

  <!-- Patient History Table -->
  <div *ngIf="!isLoading && patientHistory.length > 0" class="patient-history-table">
    <table>
      <thead>
        <tr>
          <th>Patient Name</th>
          <th>Last Visit</th>
          <th>Last Visit Time</th>
          <th>Last Symptoms</th>
          <th>Status</th>
          <th>Total Appointments</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let patient of patientHistory">
          <td>{{ patient.patientName }}</td>
          <td>{{ patient.lastAppointmentDate }}</td>
          <td>{{ patient.lastAppointmentTime }}</td>
          <td>{{ patient.symptoms }}</td>
          <td>
            <span class="status-badge" [ngClass]="'status-' + patient.status.toLowerCase()">
              {{ patient.status }}
            </span>
          </td>
          <td>{{ patient.totalAppointments }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- No Patient History Message -->
  <div *ngIf="!isLoading && patientHistory.length === 0" class="no-history">
    <p>No patient history found.</p>
  </div>
</div>
