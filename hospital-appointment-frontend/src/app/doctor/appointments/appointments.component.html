<div class="appointments-bg">
  <h2>My Appointments</h2>
  <button class="back-btn" (click)="goBack()">Back to Dashboard</button>
  
  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-error">
    <i class="fa-solid fa-exclamation-triangle"></i>
    {{ errorMessage }}
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading">
    <i class="fa-solid fa-spinner fa-spin"></i>
    Loading appointments...
  </div>

  <!-- Appointments Table -->
  <div *ngIf="!isLoading && appointments.length > 0" class="appointments-table">
    <table>
      <thead>
        <tr>
          <th>Patient</th>
          <th>Date</th>
          <th>Time</th>
          <th>Status</th>
          <th>Symptoms</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let appt of appointments">
          <td>{{ appt.patientName }}</td>
          <td>{{ appt.date }}</td>
          <td>{{ appt.time }}</td>
          <td>
            <span class="status-badge" [ngClass]="'status-' + appt.status.toLowerCase()">
              {{ appt.status }}
            </span>
          </td>
          <td>{{ appt.symptoms }}</td>
          <td>
            <button (click)="markCompleted(appt.appointmentId)" 
                    [disabled]="appt.status !== 'PENDING' && appt.status !== 'CONFIRMED'"
                    class="btn-complete">
              Complete
            </button>
            <button (click)="markCancelled(appt.appointmentId)" 
                    [disabled]="appt.status !== 'PENDING' && appt.status !== 'CONFIRMED'"
                    class="btn-cancel">
              Cancel
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- No Appointments Message -->
  <div *ngIf="!isLoading && appointments.length === 0" class="no-appointments">
    <p>No appointments found.</p>
  </div>
</div>
